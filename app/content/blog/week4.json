{
  "publishedAt": "29th Sept 2023",
  "title": "Lambda Function which takes logs from all cloudwatch streams and ships to s3",
  "content": "\n\nProblem Statement: \n\n As a DevSecOps team we take care of the AWS environment and make sure it is in compliance with the organizational policies. We use AWS cloud watch in combination with AWS Lambda to govern the resources according to the policies. For example, we Trigger a Lambda function when a log appears in cloudwatch. We use Amazon CloudWatch Events. CloudWatch Events that allows us to monitor, respond and ship it to S3.\n\n 1. Create a Lambda Function S3ConnectorSIEM with the following code. \n\n <img src='/images/uploads/w4i1.png'> \n\n 2. Create a Bucket in S3 with Custom Bucket Policy and IAM Role with Required Permission Policy: \n\n <ima src='/images/uploads/w4i2.png'> \n\n  <img src='/images/uploads/w4i3.png'> 3. Create Lambda Function with Eventbridge Trigger to run the function at specific time \n\n  <img src='/images/uploads/w4i4.png'> \n\n \n\n  <img src='/images/uploads/w4i5.png'> \n\n  \n\n  <img src='/images/uploads/w4i6.png'> \n\n \n\n  \n\n  <img src='/images/uploads/w4i7.png'> \n\n \n\n 4. To see if the logs are being shipped to S3 please check the bucket and folder inside. \n\n <img src='/images/uploads/w4i8.png'> \n\n  \n\n <img src='/images/uploads/w4i9.png'>\n\n 5. Lambda Function is working successfully.  \n\n <img src='/images/uploads/w4i10.png'>\n\n 6. For Lambda function, you can refer the github repo in the references. Please do not forget to destroy the resources created. \n\n Thank you for reading my blog. \n\n References  \n\n https://github.com/akhilsingh-git/Lambda_Function \n\n",
  "featuredImage": "/images/uploads/week4.png"
}
